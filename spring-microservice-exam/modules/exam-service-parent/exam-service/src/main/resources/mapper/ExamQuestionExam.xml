<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.github.tangyi.exam.mapper.ExamQuestionExamMapper">
    <resultMap id="examQuestionExamMap" type="com.github.tangyi.exam.api.module.ExamQuestionExam">
        <id column="id" property="id"/>
        <result column="exam_id" property="examId"/>
        <result column="question_type_id" property="questionTypeId"/>
        <result column="score" property="score"/>
        <result column="count" property="count"/>
    </resultMap>

    <sql id="examQuestionExamColumns">
        a.id,
        a.exam_id,
        a.question_type_id,
        a.score,
        a.count
    </sql>

    <delete id="delete">
        delete from exam_question_examination WHERE exam_id = #{examinationId} and question_type_id in (#{types})
    </delete>

    <insert id="insertForeachExamQuestionExam" parameterType="java.util.List" useGeneratedKeys="false">
    insert into exam_question_examination (
    exam_id,
    question_type_id,
    score,
    count
    ) values
    <foreach collection="list" item="item" index="index" separator=",">
        (
        #{item.examId},
        #{item.questionTypeId},
        #{item.score},
        #{item.count}
        )
    </foreach>
    </insert>

    <select id="getExamQuestionExamById" resultMap="examQuestionExamMap">
    SELECT
    <include refid="examQuestionExamColumns"/>
    FROM exam_question_examination a
    WHERE a.exam_id = #{examinationId}
    </select>

    <!-- where 条件 -->
    <!--<sql id="whereColumnList">-->
        <!--<if test="examRecordId != null and examRecordId != ''">-->
            <!--and a.exam_record_id = #{examRecordId}-->
        <!--</if>-->
        <!--<if test="subjectId != null and subjectId != ''">-->
            <!--and a.subject_id = #{subjectId}-->
        <!--</if>-->
        <!--<if test="type != null and type != ''">-->
            <!--and a.type = #{type}-->
        <!--</if>-->
        <!--<if test="answerType != null and answerType != ''">-->
            <!--and a.answer_type = #{answerType}-->
        <!--</if>-->
        <!--<if test="markStatus != null and markStatus != ''">-->
            <!--and a.mark_status = #{markStatus}-->
        <!--</if>-->
        <!--<if test="tenantCode != null and tenantCode != ''">-->
            <!--and a.tenant_code = #{tenantCode}-->
        <!--</if>-->
    <!--</sql>-->
</mapper>
